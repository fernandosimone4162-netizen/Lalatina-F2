<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>LaLatina - Fase 1</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
    font-family: Arial, sans-serif;
    background: #0f172a;
    color: #e5e7eb;
    text-align: center;
    padding: 20px;
}
.container {
    max-width: 600px;
    margin: auto;
    background: #020617;
    padding: 20px;
    border-radius: 10px;
}
h1 {
    color: #38bdf8;
}
.question {
    font-size: 22px;
    margin: 20px 0;
}
input {
    width: 90%;
    padding: 10px;
    font-size: 16px;
    border-radius: 6px;
    border: none;
}
button {
    margin-top: 10px;
    padding: 10px 15px;
    font-size: 16px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
}
.btn-main {
    background: #38bdf8;
    color: #020617;
}
.btn-voice {
    background: #22c55e;
    color: #020617;
}
.feedback {
    margin-top: 15px;
    font-size: 18px;
}
.hint {
    margin-top: 10px;
    font-size: 16px;
    color: #facc15;
}
</style>
</head>
<body>

<div class="container">
    <h1>LaLatina - Fase 1</h1>
    <p>Traduza a frase do ingl√™s para qualquer l√≠ngua (exceto ingl√™s).</p>

    <div class="question" id="question"></div>

    <input type="text" id="answer" placeholder="Digite ou fale a tradu√ß√£o">

    <br>

    <button class="btn-main" onclick="checkAnswer()">Confirmar</button>
    <button class="btn-voice" onclick="startVoice()">üé§ Falar</button>
    <button onclick="repeatQuestion()">üîÅ Ouvir pergunta</button>

    <div class="feedback" id="feedback"></div>
    <div class="hint" id="hint"></div>
</div>

<script>
const questions = [
    { text: "Hi", hint: "√â uma sauda√ß√£o curta e informal." },
    { text: "Hello", hint: "√â uma sauda√ß√£o comum em qualquer situa√ß√£o." },
    { text: "How are you?", hint: "Pergunta sobre como a pessoa est√°." },
    { text: "I am fine", hint: "Resposta positiva sobre seu estado." },
    { text: "What is your name?", hint: "Pergunta sobre o nome." },
    { text: "Good morning", hint: "Usado no come√ßo do dia." },
    { text: "Thank you", hint: "Expressa gratid√£o." },
    { text: "Please", hint: "Usado ao pedir algo educadamente." },
    { text: "Sorry", hint: "Usado ao pedir desculpas." },
    { text: "Goodbye", hint: "Usado ao se despedir." }
    // Estrutura pronta para escalar at√© 500
];

let current = Math.floor(Math.random() * questions.length);
let attempts = 0;

function speak(text, lang = "en-US") {
    const msg = new SpeechSynthesisUtterance(text);
    msg.lang = lang;
    speechSynthesis.speak(msg);
}

function loadQuestion() {
    attempts = 0;
    document.getElementById("hint").innerText = "";
    document.getElementById("feedback").innerText = "";
    document.getElementById("question").innerText = questions[current].text;
    speak(questions[current].text);
}

function repeatQuestion() {
    speak(questions[current].text);
}

function checkAnswer() {
    const answer = document.getElementById("answer").value.trim();
    if (answer === "") {
        document.getElementById("feedback").innerText = "Digite ou fale uma tradu√ß√£o.";
        return;
    }

    attempts++;

    // N√£o valida conte√∫do (qualquer idioma exceto ingl√™s)
    if (/^[a-zA-Z\s?!.]+$/.test(answer)) {
        document.getElementById("feedback").innerText = "N√£o responda em ingl√™s.";
        return;
    }

    document.getElementById("feedback").innerText = "Resposta correta!";
    speak("I am very good");

    setTimeout(() => {
        document.getElementById("answer").value = "";
        current = Math.floor(Math.random() * questions.length);
        loadQuestion();
    }, 1500);
}

function startVoice() {
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
        alert("Reconhecimento de voz n√£o suportado.");
        return;
    }

    const recognition = new SpeechRecognition();
    recognition.lang = "pt-BR";
    recognition.start();

    recognition.onresult = function(event) {
        document.getElementById("answer").value = event.results[0][0].transcript;
    };
}

function checkHint() {
    if (attempts === 3) {
        document.getElementById("hint").innerText =
            "Dica: " + questions[current].hint;
    }
}

// Observa tentativas para liberar dica
const originalCheck = checkAnswer;
checkAnswer = function() {
    originalCheck();
    checkHint();
};

loadQuestion();
</script>

</body>
</html>

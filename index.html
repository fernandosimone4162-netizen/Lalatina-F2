<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>LaLatina â€“ Fase 1</title>

<style>
body {
  background:#111;
  color:#fff;
  font-family:Arial, sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.box {
  background:#1c1c1c;
  padding:20px;
  width:360px;
  border-radius:10px;
  text-align:center;
}

input {
  width:100%;
  padding:8px;
  margin-top:10px;
  border-radius:5px;
  border:none;
}

button {
  margin-top:10px;
  padding:8px 12px;
  border:none;
  border-radius:5px;
  cursor:pointer;
}

#skipBtn {
  display:none;
  background:#555;
  color:#fff;
}

#hint {
  margin-top:10px;
  color:#ffd700;
  display:none;
}
</style>
</head>

<body>

<div class="box">
  <h2 id="question"></h2>
  <input id="answer" placeholder="Traduza (nÃ£o responda em inglÃªs)">
  <button onclick="checkAnswer()">Responder</button>
  <button id="skipBtn" onclick="skipQuestion()">Pular</button>
  <div id="hint"></div>
</div>

<script>
/* =====================================
   BASE DE PERGUNTAS â€“ 100 (ESCALÃVEL 500)
===================================== */

const questions = [
  { q:"Hi", a:["oi","olÃ¡"], d:1 },
  { q:"Hello", a:["olÃ¡","oi"], d:1 },
  { q:"Good morning", a:["bom dia"], d:1 },
  { q:"Good night", a:["boa noite"], d:1 },
  { q:"Good afternoon", a:["boa tarde"], d:1 },

  { q:"Thank you", a:["obrigado","obrigada"], d:2 },
  { q:"Please", a:["por favor"], d:2 },
  { q:"Yes", a:["sim"], d:2 },
  { q:"No", a:["nÃ£o"], d:2 },

  { q:"How are you?", a:["como vocÃª estÃ¡","como vai vocÃª"], d:3 },

  // ðŸ‘‰ Continue atÃ© 100 seguindo o mesmo padrÃ£o
  // ðŸ‘‰ Pode escalar atÃ© 500 sem mudar o algoritmo
];

/* =====================================
   VARIÃVEIS DO ALGORITMO
===================================== */

let difficulty = 1;
let attempts = 0;
let correctAnswers = 0;
let totalQuestionsAnswered = 0;
let current;

/* =====================================
   FUNÃ‡Ã•ES PRINCIPAIS
===================================== */

function isEnglish(text) {
  return /^[a-zA-Z\s!?]+$/.test(text.trim());
}

function getNextQuestion() {
  let pool = questions.filter(q => q.d === difficulty);

  if (pool.length === 0) pool = questions;

  current = pool[Math.floor(Math.random() * pool.length)];
  document.getElementById("question").innerText = current.q;

  attempts = 0;
  document.getElementById("hint").style.display = "none";
  document.getElementById("skipBtn").style.display = "none";
  document.getElementById("answer").value = "";
}

function checkAnswer() {
  const input = document.getElementById("answer").value.toLowerCase().trim();
  attempts++;

  if (isEnglish(input)) {
    alert("VocÃª nÃ£o pode responder em inglÃªs.");
    return;
  }

  if (current.a.some(ans => input.includes(ans))) {
    correctAnswers++;
    totalQuestionsAnswered++;

    adaptiveAlgorithm(true);
    getNextQuestion();
  } else {
    adaptiveAlgorithm(false);

    if (attempts >= 3) {
      document.getElementById("hint").innerText =
        "Dica: pense em uma traduÃ§Ã£o simples e direta.";
      document.getElementById("hint").style.display = "block";
    }

    if (attempts >= 5) {
      document.getElementById("skipBtn").style.display = "inline-block";
    }
  }
}

function skipQuestion() {
  totalQuestionsAnswered++;
  adaptiveAlgorithm(false);
  getNextQuestion();
}

/* =====================================
   ALGORITMO ADAPTATIVO REAL
===================================== */

function adaptiveAlgorithm(correct) {

  // Se errar muito, abaixa dificuldade
  if (!correct && difficulty > 1) {
    difficulty--;
  }

  // Se acertar bem, aumenta dificuldade
  if (correct && correctAnswers % 5 === 0) {
    difficulty++;
  }

  // Limite de dificuldade da fase
  if (difficulty < 1) difficulty = 1;
  if (difficulty > 100) difficulty = 100;

  // LiberaÃ§Ã£o da prova (decisÃ£o do algoritmo)
  if (
    totalQuestionsAnswered >= 100 &&
    correctAnswers / totalQuestionsAnswered >= 0.8
  ) {
    alert("VocÃª estÃ¡ apto para a prova da Fase 1.");
    // aqui futuramente entra o redirecionamento da prova
  }
}

/* =====================================
   INICIALIZAÃ‡ÃƒO
===================================== */

getNextQuestion();
</script>

</body>
</html>
